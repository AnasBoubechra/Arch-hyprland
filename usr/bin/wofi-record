#!/bin/sh -x

PIC="$(xdg-user-dir PICTURES)/screen_shots_luke"
VID="$(xdg-user-dir VIDEOS)"

get_options() {
  printf "
ğŸ“·  Copy-pic Selected
ğŸ“·  Copy-pic Full
ğŸ“·  pic Selected
ğŸ“·  pic Full
ğŸ›‘  Stop Recording
ğŸ“¹+ğŸ™ï¸  vid Full + mic
ğŸ“¹  vid Selected
ğŸ“¹  vid Full
"
}

main() {
  choice=$( (get_options) | wofi -n  -d -i)

  case $choice in
  'ğŸ“·  Copy-pic Selected') grim -g "$(slurp)" | wl-copy ;;
  'ğŸ“·  Copy-pic Full') grim - | wl-copy ;;
  'ğŸ“·  pic Selected') grim -g "$(slurp)" ${PIC}/$(date +'%s_grim.png') ;;
  'ğŸ“·  pic Full') grim ${PIC}/$(date +'%s_grim.png') ;;
  'ğŸ›‘  Stop Recording')
    pid=`pgrep wf-recorder`
    [ "$pid" ] && pkill --signal SIGINT wf-recorder
    ;;
  'ğŸ“¹  vid Selected') wf-recorder -g "$(slurp)"  --file=${VID}/$(date +'%s_vid_selected.mp4');;
  'ğŸ“¹  vid Full') wf-recorder --file=${VID}/$(date +'%s_vid_full.mp4') ;;
  'ğŸ“¹+ğŸ™ï¸  vid Full + mic') wf-recorder -a --file=${VID}/$(date +'%s_vid_full_mic.mp4') ;;
  esac
}

main &

exit 0
